{% load static %}

{% for pf in listings %}
<div class="w-full flex flex-col md:flex-row border-b border-white/5 hover:bg-white/10 transition-colors group animate-fade-in py-3 px-3 md:py-0 md:px-0 relative">

    <div class="w-full md:w-[10%] md:p-4 md:border-r md:border-white/5 flex flex-row md:flex-col justify-between items-center md:items-start md:justify-start order-1">
        <span class="dc font-bold text-[#deb018] text-sm tracking-wide block truncate">
            {{ pf.datacenter }}
        </span>
        <span class="md:hidden creator font-bold text-[#00e1ff] text-xs tracking-wide truncate">
            {{ pf.creator }}
        </span>
    </div>

    <div class="w-full md:w-[40%] md:p-4 mt-2 md:mt-0 order-3 md:order-2">
        <div class="flex flex-col gap-2">
            <div class="flex flex-nowrap md:flex-wrap gap-[3px] items-center overflow-x-auto md:overflow-visible pb-1 md:pb-0 scrollbar-hide">
                {% for slot in pf.slots %}
                    <div class="role-box {{ slot.css_classes }} shrink-0" 
                         title="{{ slot.title }}"
                         data-bs-toggle="tooltip">
                        {% if slot.is_image %}
                            <img src="{% static 'img/jobs/' %}{{ slot.image_file }}" 
                                 alt="{{ slot.title }}"
                                 class="job-icon">
                        {% endif %}
                    </div>
                {% endfor %}
            </div>
            
            <span class="text-[0.6rem] text-gray-400 font-mono tracking-wider font-bold hidden md:block">
                MEMBERS: <span class="text-white">{{ pf.slots_count }}</span>
            </span>
        </div>
    </div>

    <div class="w-full md:w-[30%] md:p-4 my-1 md:my-0 order-2 md:order-3">
        <div class="flex flex-col gap-1">
            <span class="font-bold text-[#d63384] text-sm tracking-wide">
                [{{ pf.duty }}]
            </span>
            <span class="desc text-gray-300 text-xs leading-5 opacity-90 group-hover:opacity-100 font-normal break-words">
                {{ pf.description }}
            </span>
        </div>
    </div>

    <div class="hidden md:block md:w-[20%] md:p-4 text-right order-4">
        <span class="creator font-bold text-[#00e1ff] text-xs tracking-wide drop-shadow-[0_0_3px_rgba(0,225,255,0.4)] truncate block">
            {{ pf.creator }}
        </span>
    </div>

</div>

{% empty %}
<div class="p-16 text-center border-b border-white/5">
    <p class="text-gray-500 italic font-mono text-xs tracking-widest uppercase">
        No signals detected in the network.
    </p>
</div>
{% endfor %}

<style>
    @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
    .animate-fade-in { animation: fadeIn 0.2s ease-out forwards; }
    .scrollbar-hide::-webkit-scrollbar { display: none; }
    .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
</style>